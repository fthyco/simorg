(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{50318:function(e,t,n){Promise.resolve().then(n.bind(n,16117))},16117:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(57437),s=n(2265),i=n(71837),o=n(27648);function a(){let[e,t]=(0,s.useState)([]),[n,a]=(0,s.useState)(!0),[l,c]=(0,s.useState)(!1),[d,p]=(0,s.useState)(!1),[u,x]=(0,s.useState)("seed"),[h,m]=(0,s.useState)("tech_saas"),[y,f]=(0,s.useState)(50),[g,j]=(0,s.useState)(!1),[v,b]=(0,s.useState)({capital:5e4,talent:5e4,time:5e4,political_cost:5e4,differentiation_threshold:3,compression_limit:5}),[S,C]=(0,s.useState)(null),[N,w]=(0,s.useState)(""),k=()=>{try{let e=localStorage.getItem("myOrgProjectIds");return e?JSON.parse(e):[]}catch(e){return[]}},_=e=>{let t=k();t.includes(e)||(t.push(e),localStorage.setItem("myOrgProjectIds",JSON.stringify(t)))},O=e=>{let t=k().filter(t=>t!==e);localStorage.setItem("myOrgProjectIds",JSON.stringify(t))},z=async()=>{a(!0);try{let e=k();if(0===e.length){t([]),a(!1);return}let n=await (0,i.hW)(e);t(n)}catch(e){console.error(e)}finally{a(!1)}};(0,s.useEffect)(()=>{z()},[]);let I=async(e,t)=>{if(t.preventDefault(),t.stopPropagation(),confirm("Delete this session?"))try{await (0,i.th)(e),O(e),await z()}catch(e){console.error(e)}},T=async(e,t)=>{t.preventDefault(),t.stopPropagation();let n=crypto.randomUUID();try{await (0,i.mr)(e,n),_(n),await z()}catch(e){console.error(e)}},P=(e,t)=>{t.preventDefault(),t.stopPropagation(),C(e),w(e)},D=async e=>{if(e.preventDefault(),e.stopPropagation(),!S||!N.trim()||N===S){C(null);return}try{await (0,i.Pj)(S,N.trim());let e=k(),t=e.indexOf(S);-1!==t&&(e[t]=N.trim(),localStorage.setItem("myOrgProjectIds",JSON.stringify(e))),C(null),await z()}catch(e){console.error(e),alert("Failed to rename session.")}},B=async()=>{p(!0);let e=crypto.randomUUID();try{await (0,i.tq)(e,{stage:u,industry:h,success_level:y,...g?{overrides:v}:{}}),_(e),window.location.href="/session/".concat(e)}catch(e){console.error(e),alert("Failed to generate organization.")}finally{p(!1),c(!1)}};return(0,r.jsxs)("div",{className:"app-layout",style:{background:"#ffffff",overflowY:"auto"},children:[(0,r.jsxs)("header",{className:"app-header",children:[(0,r.jsx)(o.default,{href:"/",style:{textDecoration:"none"},children:(0,r.jsxs)("div",{className:"header-brand",style:{cursor:"pointer"},children:["⬡ OrgKernel ",(0,r.jsx)("span",{style:{color:"var(--text-muted)",marginLeft:"8px",fontSize:"11px",fontWeight:"normal"},children:"Control Center"})]})}),(0,r.jsx)("div",{className:"header-meta",children:(0,r.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>c(!0),children:"+ Create New Org"})})]}),(0,r.jsx)("main",{style:{padding:"40px",maxWidth:"1200px",margin:"0 auto",width:"100%"},children:n&&0===e.length?(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"Loading Sessions..."}):0===e.length?(0,r.jsxs)("div",{className:"empty-state",style:{minHeight:"60vh"},children:[(0,r.jsx)("div",{className:"empty-state-icon",children:"⬡"}),(0,r.jsx)("div",{className:"empty-state-text",children:"No sessions yet. Create your first organization."}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>c(!0),style:{marginTop:"16px"},children:"+ Create New Org"})]}):(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:e.map(e=>{var t;return(0,r.jsx)(o.default,{href:"/session/".concat(e.project_id),style:{textDecoration:"none",color:"inherit",display:"block"},children:(0,r.jsxs)("div",{className:"card session-card",style:{cursor:"pointer",position:"relative"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",borderBottom:"1px solid var(--border-subtle)",paddingBottom:"12px"},children:[(0,r.jsxs)("div",{style:{flex:1},children:[S===e.project_id?(0,r.jsx)("form",{onSubmit:D,onClick:e=>e.stopPropagation(),style:{display:"flex",gap:"4px"},children:(0,r.jsx)("input",{autoFocus:!0,className:"input-field",value:N,onChange:e=>w(e.target.value),onBlur:()=>C(null),style:{fontSize:"13px",padding:"4px 8px",height:"28px"}})}):(0,r.jsx)("div",{onDoubleClick:t=>P(e.project_id,t),title:"Double-click to rename",style:{fontWeight:700,fontSize:"14px",marginBottom:"4px",cursor:"text"},children:e.project_id}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontFamily:"monospace"},children:(null===(t=e.state_hash)||void 0===t?void 0:t.slice(0,12))||"—"})]}),(0,r.jsxs)("div",{style:{textAlign:"right"},children:[(0,r.jsx)("div",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:600,color:"var(--text-secondary)"},children:e.stage||"—"}),(0,r.jsx)("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:e.industry||"—"})]})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase"},children:"Events"}),(0,r.jsx)("div",{style:{fontSize:"18px",fontWeight:700},children:e.event_count})]}),(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase"},children:"Debt"}),(0,r.jsx)("div",{style:{fontSize:"18px",fontWeight:700,color:e.structural_debt>1e3?"var(--accent-rose)":"inherit"},children:e.structural_debt})]}),(0,r.jsxs)("div",{style:{textAlign:"right"},children:[(0,r.jsx)("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase"},children:"Density"}),(0,r.jsx)("div",{style:{fontSize:"18px",fontWeight:700},children:e.structural_density})]})]}),e.structural_debt>1e3&&(0,r.jsx)("div",{style:{fontSize:"10px",color:"var(--accent-rose)",marginBottom:"12px",background:"rgba(239, 68, 68, 0.06)",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:"⚠ High Structural Debt"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",borderTop:"1px solid var(--border-subtle)",paddingTop:"12px"},children:[(0,r.jsx)("button",{className:"btn btn-secondary btn-sm",style:{flex:1,fontSize:"10px"},children:"Open"}),(0,r.jsx)("button",{className:"btn btn-secondary btn-sm",style:{fontSize:"10px"},onClick:t=>P(e.project_id,t),children:"Rename"}),(0,r.jsx)("button",{className:"btn btn-secondary btn-sm",style:{fontSize:"10px"},onClick:t=>T(e.project_id,t),children:"Clone"}),(0,r.jsx)("button",{className:"btn btn-secondary btn-sm",style:{fontSize:"10px",color:"var(--accent-rose)"},onClick:t=>I(e.project_id,t),children:"Delete"})]})]})},e.project_id)})})}),l&&(0,r.jsx)("div",{className:"loading-overlay",style:{alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)("div",{className:"lobby-modal",style:{width:"480px",maxHeight:"85vh",overflowY:"auto",position:"relative",zIndex:100},children:[(0,r.jsx)("h2",{children:"Organizational Modeling Engine"}),(0,r.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"24px"},children:"Configure the topological seeds and constraint profile for a new simulation session."}),(0,r.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,textAlign:"left"},children:"Scale Stage"}),(0,r.jsxs)("select",{value:u,onChange:e=>x(e.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--border-color)",backgroundColor:"#f8fafc"},children:[(0,r.jsx)("option",{value:"seed",children:"Seed (Lean, singular focus)"}),(0,r.jsx)("option",{value:"growth",children:"Growth (Emerging specialization)"}),(0,r.jsx)("option",{value:"structured",children:"Structured (Formal departments)"}),(0,r.jsx)("option",{value:"mature",children:"Mature (High density, high debt risk)"})]})]}),(0,r.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,textAlign:"left"},children:"Industry Topology"}),(0,r.jsxs)("select",{value:h,onChange:e=>m(e.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--border-color)",backgroundColor:"#f8fafc"},children:[(0,r.jsx)("option",{value:"tech_saas",children:"Tech SaaS (Hub & Spoke / Dense Product)"}),(0,r.jsx)("option",{value:"manufacturing",children:"Manufacturing (Linear Supply Chain)"}),(0,r.jsx)("option",{value:"marketplace",children:"Marketplace (Multi-Cluster Supply/Demand)"})]})]}),(0,r.jsxs)("div",{className:"form-group",style:{marginBottom:"24px"},children:[(0,r.jsxs)("label",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontWeight:600},children:[(0,r.jsx)("span",{children:"Success Level (Constraint Proxy)"}),(0,r.jsx)("span",{style:{color:"var(--brand-primary)"},children:y})]}),(0,r.jsx)("input",{type:"range",min:"1",max:"100",value:y,onChange:e=>f(parseInt(e.target.value,10)),style:{width:"100%",accentColor:"#1f2937"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px",paddingTop:"16px",borderTop:"1px solid var(--border-subtle)"},children:[(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontWeight:600},children:[(0,r.jsx)("input",{type:"checkbox",checked:g,onChange:e=>j(e.target.checked),style:{marginRight:"8px"}}),"Advanced Constraint Overrides"]}),g&&(0,r.jsx)("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"6px",fontSize:"13px"},children:Object.entries(v).map(e=>{let[t,n]=e;return(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",alignItems:"center"},children:[(0,r.jsx)("label",{children:t}),(0,r.jsx)("input",{type:"number",value:n,onChange:e=>b(n=>({...n,[t]:parseInt(e.target.value)||0})),style:{width:"80px",padding:"4px",borderRadius:"4px",border:"1px solid var(--border-subtle)",textAlign:"right"}})]},t)})})]}),(0,r.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"16px"},children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>c(!1),disabled:d,children:"Cancel"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:B,disabled:d,children:d?"Initializing Sequence...":"Generate Organization"})]})]})})]})}},71837:function(e,t,n){"use strict";n.d(t,{IV:function(){return d},Pj:function(){return a},hW:function(){return i},mr:function(){return l},th:function(){return o},tq:function(){return p},y0:function(){return c}});let r="http://localhost:8000".replace(/\/+$/,"");async function s(e,t){let n=await fetch("".concat(r).concat(e),{headers:{"Content-Type":"application/json"},...t});if(!n.ok)throw Error((await n.json().catch(()=>({}))).detail||"API error: ".concat(n.status));return n.json()}async function i(e){if(e&&0===e.length)return[];let t="/projects";return e&&e.length>0&&(t+="?project_ids=".concat(encodeURIComponent(e.join(",")))),s(t)}async function o(e){return s("/projects/".concat(e),{method:"DELETE"})}async function a(e,t){return s("/projects/".concat(e,"/rename"),{method:"PATCH",body:JSON.stringify({new_name:t})})}async function l(e,t){return s("/projects/".concat(e,"/duplicate"),{method:"POST",body:JSON.stringify({new_project_id:t})})}async function c(e){return s("/projects/".concat(e,"/state"))}async function d(e,t){return s("/projects/".concat(e,"/append-event"),{method:"POST",body:JSON.stringify(t)})}async function p(e,t){return s("/projects/".concat(e,"/generate-org"),{method:"POST",body:JSON.stringify(t)})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=50318)}),_N_E=e.O()}]);